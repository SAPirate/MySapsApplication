@using MySapsApplication.Models.Suspects
@model List<CrimeRecordModel>
@{
    ViewBag.Title = "Case Manager";
    var samRecords = ViewBag.SamRecords as List<CrimeRecordModel>;
}

<h2 style="text-align:center;color:darkslategray;text-transform:uppercase;font-size:18px;padding:1%;">Case Manager</h2>

<h3 style="background-color:cadetblue;color:aliceblue;padding:1%;font-size:18px;text-transform:uppercase;font-weight:400;border:1px solid black;">Records for caseManager1: Sam</h3>

@if (samRecords != null && samRecords.Count > 0)
{
    <table class="table table-striped table-bordered table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Case ID</th>
                <th>Suspect No</th>
                <th>Offence</th>
                <th>Sentence</th>
                <th>Issued At</th>
                <th>Issued By</th>
                <th>Date Issued</th>
                <th>Status</th>
                <th>Edit</th>

               <!-- New column for displaying the current status -->
            </tr>
        </thead>
        <tbody>
            @foreach (var record in samRecords)
            {
                <tr>
                    <td>@record.Id</td>
                    <td>@record.SuspectNo</td>
                    <td>@record.Offence</td>
                    <td>@record.Sentence</td>
                    <td>@record.IssuedAt</td>
                    <td>@record.IssuedBy</td>
                   
                    <td>@record.IssueDate</td>
                    <td>@record.Status</td>
                    
                            <td>
                        @if (record.Status != "CompleteCase")
                        {
                                            <a asp-action="CrimeRecord" class="btn btn-warning btn-sm"
                                               style="background-color:cornflowerblue; color:aliceblue; border:1px solid skyblue;"
                                               asp-route-id="@record.Id">Edit</a>
                        }
                        else
                        {
                                            <span>No Edit Permission</span>
                        }
                                </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No records found for Sam.</p>
}

<footer style="background-color: skyblue; padding: 20px; text-align: center; position: relative; bottom: 0; width: 100%;">
    <p>&copy; 2024 Your Company Name. All Rights Reserved.</p>
</footer>
